(function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Models",function(a){return a.Cursor=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.defaults={x:0,y:0,os:"Windows"},a.prototype.sync=function(){},a}()})}).call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Models",function(a){return a.LocalCursor=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,App.Models.Cursor),a.prototype.socket=io.connect("/cursors"),a.prototype.initialize=function(){return _.bindAll(this),this.set({os:this.getOS()})},a.prototype.getOS=function(){return~navigator.appVersion.indexOf("Mac")?"Mac":"Windows"},a.prototype.sync=function(){return this.socket.emit("update",this)},a}()})}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Models",function(a){return a.Message=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Model),a.prototype.defaults={text:"default text"},a}()})}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Collections",function(a){return a.Cursors=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=App.Models.Cursor,a.prototype.socket=io.connect("/cursors"),a.prototype.initialize=function(){return _.bindAll(this),this.socket.on("update",this.update)},a.prototype.update=function(a){var b;return b=this.get(a.id),b?b.set({x:a.x,y:a.y}):this.add(a)},a}()})}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Collections",function(a){return a.Messages=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.Collection),a.prototype.model=App.Models.Message,a.prototype.socket=io.connect("/messages"),a.prototype.initialize=function(){return _.bindAll(this),this.bind("send",this.send),this.socket.on("new",this.recieve)},a.prototype.send=function(a){return this.socket.emit("new",a)},a.prototype.recieve=function(a){return this.add(a)},a}()})}.call(this),function(){var a=Array.prototype.slice;window.namespace=function(b,c,d){var e,f,g,h,i,j;arguments.length<3&&(i=[typeof exports!="undefined"?exports:window].concat(a.call(arguments)),b=i[0],c=i[1],d=i[2]),f=b,j=c.split(".");for(g=0,h=j.length;g<h;g++)e=j[g],b=b[e]||(b[e]={});return d(b,f)}}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Views",function(a){return a.Message=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="li",a.prototype.model=App.Models.Message,a.prototype.initialize=function(){return _.bindAll(this,"render","unrender"),this.model.bind("change",this.render)},a.prototype.render=function(){return $(this.el).html('<div class="message">'+this.model.escape("text")+"</div>"),this},a.prototype.unrender=function(){return $(this.el).remove()},a}()})}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Views",function(a){return a.Messages=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.el=$("body"),a.prototype.collection=App.Collections.Messages,a.prototype.events={submit:"getText"},a.prototype.initialize=function(){return _.bindAll(this,"render","sendMessage","appendMessage"),this.collection.bind("add",this.appendMessage)},a.prototype.render=function(){var a,b,c,d,e;d=this.collection.models,e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(this.appendMessage(a));return e},a.prototype.getText=function(){var a;return a=$(":input[type=text]").val(),a&&this.sendMessage(a),$(":input[type=text]").val("")},a.prototype.sendMessage=function(a){var b;return b=new App.Models.Message({text:a}),this.collection.trigger("send",b),this.collection.add(b)},a.prototype.appendMessage=function(a){var b;return b=new App.Views.Message({model:a}),$("#recievedMessages",this.el).prepend(b.render().el)},a}()})}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Views",function(a){return a.LocalCursor=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.el=document,a.prototype.model=App.Models.LocalCursor,a.prototype.events={mousemove:"onMouseMove"},a.prototype.initialize=function(){return _.bindAll(this)},a.prototype.onMouseMove=function(a){return this.model.set({x:a.pageX,y:a.pageY}),this.model.save()},a}()})}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Views",function(a){return a.Cursor=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.tagName="img",a.prototype.model=App.Models.Cursor,a.prototype.OSToIcon={Mac:"/images/macCursor.png",Windows:"/images/winCursor.png"},a.prototype.initialize=function(){return _.bindAll(this),this.model.bind("change",this.render),this.model.bind("destroy",this.unrender),$(this.el).attr("src",this.OSToIcon[this.model.get("os")]),$(this.el).css("z-index",1)},a.prototype.render=function(){return $(this.el).offset({left:this.model.get("x"),top:this.model.get("y")}),this},a.prototype.unrender=function(){return $(this.el).fadeOut("slow")},a}()})}.call(this),function(){var a=Object.prototype.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};namespace("App.Views",function(a){return a.Cursors=function(){function a(){a.__super__.constructor.apply(this,arguments)}return b(a,Backbone.View),a.prototype.el=$("body"),a.prototype.collection=App.Collections.Cursors,a.prototype.initialize=function(){return _.bindAll(this,"appendCursor"),this.collection.bind("add",this.appendCursor)},a.prototype.appendCursor=function(a){var b;return b=new App.Views.Cursor({model:a}),$(this.el).prepend(b.render().el)},a}()})}.call(this),function(){var a,b=Object.prototype.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};a=function(){function a(){a.__super__.constructor.apply(this,arguments)}return c(a,Backbone.View),a.prototype.initialize=function(){var a,b,c,d,e,f;return c=new App.Models.LocalCursor,a=new App.Collections.Cursors,d=new App.Views.LocalCursor({model:c}),b=new App.Views.Cursors({collection:a}),e=new App.Collections.Messages,f=new App.Views.Messages({collection:e})},a}(),$(document).ready(function(){return new a})}.call(this)